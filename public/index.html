<!DOCTYPE html>
<html>
  <!--

               set up the web page to work with desktop, mobile, and IE 9+

      -->
  <head>
    <meta name="viewport" Content-Type="text/javascript; charset=utf-8" content="initial-scale=1.0, width=device-width, height=device-height, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!--

                                          Include all the libraries

        -->
    <script type="text/javascript" src="es6-shim.js"></script>
    <script type="text/javascript" src="blockly/blockly_compressed.js"></script>
    <script type="text/javascript" src="blockly/blocks_compressed.js"></script>
    <script type="text/javascript" src="yazz_blockly_blocks.js"></script>
    <script type="text/javascript" src="yazz_blockly_generator.js"></script>
    <script type="text/javascript" src="yazz_blockly_output_code.js"></script>
    <script type="text/javascript" src="blockly/msg/js/en.js"></script>
    <script type="text/javascript" src="jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="jquery.zoomooz.js"></script>
    <script type="text/javascript" src="blockly_helper.js"></script>
    <script type="text/javascript" src="gun.js"></script>
    <script type="text/javascript" src="tether.min.js"></script>
    <script type="text/javascript" src="bootstrap.min.js"></script>
    <script type="text/javascript" src="sql.js"></script>

    <!--

                                          Include all the CSS

        -->
    <link rel="stylesheet" type="text/css" href="bootstrap.min.css"></link>
    <link rel="stylesheet" type="text/css" href="vue_app.css"></link>

</head>





<body id=body style='margin:0px; padding: 0px;  border: 0px;  width: 100%;  height:100%;  left: 0px;' >





  <!--

                                                   Blockly code - not used yet

    -->
  <div id=blocklyid  style="width: 100%;height: 90%; position: absolute; top: 0px; display:block; left: -500px;">
    <table style='height: 100%; width: 100%;'>
      <tr>
        <td id="blocklyArea" style=" width: 100%;height: 99%;">
        </td>
      </tr>
    </table>

    <div id="blocklyDiv"   style="width: 100%;height: 90%;position: absolute; top: 0px;"></div>

    <xml id="toolbox" style="display: none">

      <block type="yazz_builder"></block>
      <block type="yazz_search_expr"></block>
      <block type="yazz_any_watcher"></block>
      <block type="yazz_new_record"></block>
      <block type="yazz_div"></block>
      <block type="yazz_input"></block>
      <block type="yazz_code"></block>
      <block type="yazz_time_watcher"></block>

    </xml>
  </div>





  <!--

                            The zoomable part of the screen containing 4 zoom areas

    -->
  <div class='zoomViewport noScroll' id=other style=' width: 100%;height: 90%;position: absolute; bottom: 10%; left: 0px;display: block '>
    <div id=zoommain class='zoomTarget zoomContainer'  style='height: 100%; width: 100%;'>
      <div id=zzz class='zoomTarget' style='height: 100%; width: 100%; '>








      <!--

                                                ..
                                                .. - Blockly editor - not used yet


       -->
        <div  id=editorttt class="zoomTarget" data-targetsize="1"
             style='position: absolute; left: 0%; top: 0%; height: 90%; width: 90%; display: inline-block; -webkit-transform: translatez(0); transform:   scale(0.3, 0.3);border: 5px solid blue; display: none;'>
          <h3>
            Make
          </h3>
          <img2 style='width: 90%; height: 90%;' src='/blockly.png' onclick='ineditor = true;setTimeout(function(){swapelements();},200);'></img2>
        </div>





      <!--

                                                x.
                                                .. - Welcome


       -->
      <div  id=mainsources class="zoomTarget" data-targetsize="1"
           style='position: absolute; left: 0%; top: 0%; height: 90%; width: 90%; display: inline-block; -webkit-transform: translatez(0); transform:   scale(0.5, 0.5);border: 5px solid blue;;overflow: auto'>
        <div id=welcome>
        </div>
        <div style='  text-align: center;'>
    		Release date: 7 May 2017
        </div>
      </div>







  <!-- -

                                                .x
                                                .. - SQL Input window


       -->
      <div id=ttt2 class="zoomTarget"  data-targetsize="1"
           style='position: absolute; left: 50%; top: 0%; height: 90%; width: 90%;
                  display: inline-block; -webkit-transform: translatez(0); transform:   scale(0.5, 0.5);border: 5px solid blue;
                  overflow: auto'>
        <h3>
          SQL
        </h3>
        <div id="outputcode">
          <input type=button value='Click Network test' onClick='alert("clicked " + location.host );'>

          </input>

          <input id=maininput
                 onkeyup="updateNetworkTest()">
          </input>
          <div id=mainid></div>
          <input id=maininput2
                 onkeyup="updateNetworkTest2()">
          </input>
          <div id=mainid2></div>



      <textarea rows="4" cols="50" type=input
                id=sqlinput >SELECT * FROM ojobs_users limit 2</textarea>

        <div id=select_source_parent>
        </div>
        <input type=button value='get result'
               onClick='getresult(document.getElementById("select_source").value,  document.getElementById("sqlinput").value);'>
        <div id=result></div>
        </div>
    <button class="btn btn-secondary" type="button" v-on:click='OK'>OK</button>
    </div>











      <!--

                                                ..
                                                x. - Connections


       -->
      <div  id=mainsources class="zoomTarget" data-targetsize="1"
               style='padding: 5px;position: absolute; left: 0%; top: 50%; height: 90%; width: 90%; display: inline-block; -webkit-transform: translatez(0); transform:   scale(0.5, 0.5);border: 5px solid blue;overflow: auto'; >
        <h1>
          Connections
        </h1>
        <div id="connections_window" style='height: 85%; width: 85%;' >
          <div class='container'>
            <div class="row">
            <div class="col-xs-12">
                 <connections-table></connections-table>
              </div>
              </div>
          </div>
          </div>
        </div>
      </div>








      <!--

                                                ..
                                                .x - take a break


       -->
    <div  id=mainviews class="zoomTarget" data-targetsize="1"
         style='padding: 5px;position: absolute; left: 50%; top: 50%; height: 90%; width: 90%; display: inline-block; -webkit-transform: translatez(0); transform:   scale(0.5, 0.5);border: 5px solid blue;;overflow: auto'>
      <h3>
        Take a break
      </h3>
        <div id="drivers_window" style='height: 85%; width: 85%;' >
        <div class='container'>
          <div class="row">
          <div class="col-xs-12">
               <drivers-table></drivers-table>
            </div>
            </div>
        </div>
        </div>
    </div>










      <!--

                                                ..
                                                .. - Overview Dashboard - not used yet


       -->
      <div  id=maindashboard class="zoomTarget" data-targetsize="1"
           style='position: absolute; left: 60%; top: 0%; height: 90%; width: 90%; display: inline-block; -webkit-transform: translatez(0); transform:   scale(0.3, 0.3);border: 5px solid blue;;overflow: auto; display: none;'>
        <h3>
          Dashboard
        </h3>
      </div>









      <!--

                                                ..
                                                .. - Main output window - not used yet


       -->
      <div id=ttt class="zoomTarget"  data-targetsize="1"
           style='position: absolute; left: 0%; top: 30%; height: 90%; width: 90%; display: inline-block; -webkit-transform: translatez(0); transform:   scale(0.3, 0.3);border: 5px solid red;;overflow: auto;display: none;'>
        <h3>
          Output
        </h3>
        <div id="main_output_window" style='height: 85%; width: 100%;'>
          <div>
            <rows-table  v-bind:rows="rows"></rows-table>
          </div>
        </div>
      </div>

















      <!--

                                                ..
                                                .. - People - not used yet


       -->
      <div  id=mainpeople class="zoomTarget" data-targetsize="1"
           style='position: absolute; left: 60%; top: 30%; height: 90%; width: 90%; display: inline-block; -webkit-transform: translatez(0); transform:   scale(0.3, 0.3);border: 5px solid blue;;overflow: auto;display: none;'>
        <h3>
          people
        </h3>
      </div>












      <!--

                                                ..
                                                .. - Directory of apps - not used yet


       -->
    <div  id=maindirectory class="zoomTarget" data-targetsize="1"
         style='position: absolute; left: 30%; top: 60%; height: 90%; width: 90%; display: inline-block; -webkit-transform: translatez(0); transform:   scale(0.3, 0.3);border: 5px solid blue; overflow: auto;display: none;'>
      <h3>
        Directory
      </h3>
      <div>
        Enterprise data search engine
      </div>
      <div>
        Enterprise data made easy
      </div>
      <div>
        Share files securely with your colleagues
      </div>
      <div>
        Share Excel, Oracle, SQL Server securely with your colleagues
      </div>
      <div>
        Share Excel and RDBMS data securely with your colleagues
      </div>
      <div>
        Share speadsheets and databases securely with your colleagues
      </div>
      <div>
        Share speadsheets and SQL data securely with your colleagues
      </div>
      <div>
        Collaborate securely on speadsheets and databases  with your team
      </div>
      <div>
        Share Excel and databases securely with your colleagues
      </div>
      <div>
        Securely share data with your colleagues
      </div>
      <div>
        Share spreadsheets and databases in the enterprise
      </div>
      <div>
        Share data securely with your colleagues
      </div>
      <div>
        Big data made easy
      </div>
    </div>








    </div>
  </div>
</div>



      <!--

                                                ...
                                                ...
                                                ...
                                                xxx   -  the BACK button at the bottom of the screen

       -->
<div  style=' position: absolute; bottom: 0px; width: 100%; height: 10%;'>
  <div  style='background-color: lightblue; width: 100%; height: 100%; display: inline-block;'
       onclick='if (ineditor) {ineditor = false; swapelements();resetzoom();} else {resetzoom();}'>
  </div>
</div>


    <script type="text/javascript" >

      var gun;
      var data_connections_list = [];
      rows                      = [];
      tbrows                    = new Object();
      connectionrows            = new Object();
      code                      = '';
      var ineditor              = false;
      var blocklyArea;
      var blocklyDiv;
      var workspace;
      var main_output_window;
      var connections_window;






    // --------------------------------------------------------------------
    // get the SQL result
    // --------------------------------------------------------------------
    function getresult(source, sql) {
      $.ajax({

        //type: "POST",
        url: '/getresult',
        data: {source: source, sql: sql},
        success: function(data) {
          $("#result").text(data);
        },
        error: function(jqXHR, textStatus, errorThrown) {
          alert('error ' + textStatus + " " + errorThrown);
        }
      });
    };

    function updateNetworkTest() {
            sql("update globals set value = '" +
            document.getElementById('maininput').value
            + "' where id = 'network_test'");
    }
    function updateNetworkTest2() {
        gun.get('network_data2').not(function() {
            gun.put({value: document.getElementById('maininput2').value }).key('network_data2')
        })

            gun.get('network_data2').put({value: document.getElementById('maininput2').value })

    }
    </script>

    <script type="text/javascript" src="blockly_setup.js"></script>
    <script type="text/javascript" src="dist/build.js?1501"></script>
</body>
</html>
