<!DOCTYPE html>
<html>
  <!--

               set up the web page to work with desktop, mobile, and IE 9+

      -->
  <head>
    <meta name="viewport" Content-Type="text/javascript; charset=utf-8" content="initial-scale=1.0, width=device-width, height=device-height, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

	<script type="text/javascript" src="dropzone.js"></script>
    <link rel="stylesheet" type="text/css" href="dropzone.css"></link>

    <script type="text/javascript" >
            window.system_type = 'client';
            
            window.screenMode = "VR";

			(function () {

                  if ( typeof window.CustomEvent === "function" ) return false;

                  function CustomEvent ( event, params ) {
                    params = params || { bubbles: false, cancelable: false, detail: undefined };
                    var evt = document.createEvent( 'CustomEvent' );
                    evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );
                    return evt;
                   }

                  CustomEvent.prototype = window.Event.prototype;

                  window.CustomEvent = CustomEvent;
                })();


                
              function init_all() {
                //Bind back button to prevent escaping the page with backspace
                $(document).unbind('keydown').bind('keydown', function (event) {
                    if (event.keyCode === 8) 
                    {
                     var doPrevent = true;
                     //Chrome, FF, Safari
                     if(event.target == document.body){
                      doPrevent = true;
                     }
                     //IE
                     else
                     {
                      var nodeName = event.target.nodeName.toLowerCase();
                      if((nodeName == "input" && event.target.type == "text") || nodeName == "textarea")
                      {
                       doPrevent = false;
                      }
                      var SPEditTabInstance = $(document).find("li[id='Ribbon.EditingTools']");
                      if(SPEditTabInstance != "undefined" && SPEditTabInstance != null && $(SPEditTabInstance).children().length > 0){
                       doPrevent = false;
                      }
                     }

                     if(doPrevent)
                     {
                      //Chrome, FF, Safari
                      if(event.preventDefault()){ event.preventDefault(); }
                      //IE
                      else
                      {
                       event.returnValue = false;
                      }
                     }
                    }
                });
            };

    </script>

</head>





<body   id=body 
        style='margin:0px; padding: 0px;  border: 0px;  width: 100%;  height:100%;  left: 0px; ' 
        onload="init_all();" >

    <form   action="/file_upload"
            class="dropzone"
            id="my-awesome-dropzone" 
            style='margin:0px; padding: 0px;  border: 0px;  width: 100%;  height:100%;  left: 0px; '>
        
                <div    style='width: 100%; height: 100%;  margin:0 auto; padding: 0px; border: 0px; overflow: false' 
                        id=vr_element>
                </div>
            
    </form>


      
      
    <script type="text/javascript" >
    // --------------------------------------------------------------------
    // get the query  result
    // --------------------------------------------------------------------
    function get_query_result(source) {
      $.ajax({

        type: "POST",
        url: '/getqueryresult',
        data: {source: source},
        success: function(data) {
          //$("#result").text(data);
		  //alert(eval('(' + data + ')'));
		    setOutputData(eval('(' + data + ')'));
			},
        error: function(jqXHR, textStatus, errorThrown) {
          //alert('error ' + textStatus + " " + errorThrown);
          console.log('error ' + textStatus + " " + errorThrown);
        }
      });
    };
    // --------------------------------------------------------------------
    // get the query  result
    // --------------------------------------------------------------------
    function open_query_in_native_app(source) {
      $.ajax({

        type: "POST",
        url: '/open_query_in_native_app',
        data: {source: source},
        success: function(data) {
          //$("#result").text(data);
		  //alert(eval('(' + data + ')'));
			},
        error: function(jqXHR, textStatus, errorThrown) {
          //alert('error ' + textStatus + " " + errorThrown);
          console.log('error ' + textStatus + " " + errorThrown);
        }
      });
    };
    
        Dropzone.options.myAwesomeDropzone = {
          dictDefaultMessage: ""
        };

        Dropzone.options.myAwesomeDropzone = {
          init: function() {
            this.on("processing", function() {
                window.gotoFunction({
                    goto_name:  "scrollable_grid",
                    distance:    4,
                    duration:   "500",
                    animEnd:     function() {store.dispatch('hide_full_doc');}
                });
            });
            this.on("queuecomplete", function() {
                var x = this;
                setTimeout(function() {
                    window.when_queries_changes("id, name, driver, size, hash, type, fileName")
                    window.recalcVuexQueries();
                    x.removeAllFiles();
                    },200);
            });
          }
        };
        
    </script>

    <script type="text/javascript" src="dist/build.js?1601"></script>
</body>
</html>
